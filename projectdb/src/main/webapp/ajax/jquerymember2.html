<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>jquerymember2.html</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>

</head>

<body>
	<div id="addMember">
		<label>ID</label><input type="text" name="id">
		<label>이름</label><input type="text" name="name">
		<label>점수</label><input type="text" name="score">
		<button id="addBtn">추가</button>
	</div>
	<br><br>
	<div id="memberList">
		<table border="1">
			<thead>
				<tr>
					<th>아이디</th>
					<th>이름</th>
					<th>점수</th>
					<th><input id="all" type="checkbox" /></th>
				</tr>
			</thead>
			<tbody>
			</tbody>
		</table>
	</div>

	<script>

		const members = [
			{id: "user1", name: "Hong", score: 80},
			{id: "user2", name: "Park", score: 85},
			{id: "user3", name: "Hwang", score: 90},
		]

		members.forEach(member => {
			let tr = $('<tr />').append(
				$('<td />').text(member.id)
				, $('<td />').text(member.name)
				, $('<td />').text(member.score)
				, $('<td />').append($('<input />').attr('type', 'checkbox'))
				, $('<td />').append($('<button>삭제</button>'))

			)
			$('tbody').append(tr);
		});
		//등록
		$('#addBtn').on('click', function (e) {
			let tr = $('<tr />').append(
				$('<td />').text($('input[name="id"]').val()),
				$('<td />').text($('input[name="name"]').val()),
				$('<td />').text($('input[name="score"]').val()),
				$('<td />').append($('<input />').attr('type', 'checkbox'))
			)
			$('tbody').append(tr);
			//초기
			$('input[name="id"]').val('')
			$('input[name="name"]').val('')
			$('input[name="score"]').val('')
		});
		$('#all').on('change', function (e) {
			console.log(e.target.checked);

			$('tbody input:checkbox').prop('checked', e.target.checked);

		})

		$('tbody input[type="checkbox"]').on('change', function (e) {
			if ($('tbody input[type="checkbox"]').length
				== $('tbody input[type="checkbox"]:checked').length) {
				$('thead input:checkbox').prop('checked', true);
			} else {
				$('thead input:checkbox').prop('checked', false);
			}
		})


	</script>
</body>

</html>